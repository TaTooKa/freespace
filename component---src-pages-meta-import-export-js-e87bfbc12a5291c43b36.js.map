{"version":3,"file":"component---src-pages-meta-import-export-js-e87bfbc12a5291c43b36.js","mappings":"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","sources":["webpack://gatsby-starter-rocketdocs/./src/pages/meta/import-export.js"],"sourcesContent":["import React from 'react';\r\n\r\nimport Layout from '@rocketseat/gatsby-theme-docs/src/components/Layout';\r\nimport Seo from '@rocketseat/gatsby-theme-docs/src/components/SEO';\r\n\r\nexport default function importExport() {\r\n    var characterData = {};\r\n\r\n    const windowGlobal = typeof window !== 'undefined' && window\r\n\r\n    function download(content, fileName, contentType) {\r\n        var a = document.createElement(\"a\");\r\n        var file = new Blob([content], {type: contentType});\r\n        a.href = URL.createObjectURL(file);\r\n        a.download = fileName;\r\n        a.click();\r\n    }\r\n    function importCharacter(e) {\r\n        var file = e.target.files[0];\r\n        if (!file) {\r\n            return;\r\n        }\r\n        var reader = new FileReader();\r\n        reader.onload = function(e) {\r\n            var contents = e.target.result;\r\n            saveCharacterData(contents);\r\n        };\r\n        reader.readAsText(file);\r\n\r\n        window.location.href = '/character-stats';\r\n    }\r\n\r\n    function saveCharacterData(characterDataStr) {\r\n        var loadedCharacterData = {}\r\n        try {\r\n            loadedCharacterData = JSON.parse(characterDataStr);\r\n        } catch (e) {\r\n            alert(\"Error while loading JSON file: \"+ e);\r\n            return;\r\n        }\r\n        const loadedCharacterStats = loadedCharacterData['character'];\r\n        const loadedCharacterTraits = loadedCharacterData['traits'];\r\n        const loadedCharacterActiveTraits = loadedCharacterData['activeTraits'];\r\n        const loadedCharacterChallenges = loadedCharacterData['challenges'];\r\n        const loadedCharacterArchivedChallenges = loadedCharacterData['archivedChallenges'];\r\n\r\n        if ( windowGlobal ) {\r\n            windowGlobal.localStorage.setItem(\"character\", JSON.stringify(loadedCharacterStats));\r\n            windowGlobal.localStorage.setItem(\"traits\", JSON.stringify(loadedCharacterTraits));\r\n            windowGlobal.localStorage.setItem(\"activeTraits\", loadedCharacterActiveTraits);\r\n            windowGlobal.localStorage.setItem(\"challenges\", JSON.stringify(loadedCharacterChallenges));\r\n            windowGlobal.localStorage.setItem(\"archivedChallenges\", JSON.stringify(loadedCharacterArchivedChallenges));\r\n        }\r\n\r\n    }\r\n\r\n    function exportCharacter() {\r\n        // character stats\r\n        const savedCharacterStr = windowGlobal ? windowGlobal.localStorage.getItem(\"character\") : \"{}\"\r\n        const savedCharacter = JSON.parse(savedCharacterStr)\r\n        \r\n        // character traits\r\n        const savedTraitsStr = windowGlobal ? windowGlobal.localStorage.getItem(\"traits\") : \"{}\"\r\n        const savedTraits = JSON.parse(savedTraitsStr)\r\n\r\n        // character traits\r\n        const savedActiveTraits = windowGlobal ? windowGlobal.localStorage.getItem(\"activeTraits\") : \"{}\"\r\n\r\n        // challenges\r\n        const savedChallengesStr = windowGlobal ? windowGlobal.localStorage.getItem(\"challenges\") : \"{}\"\r\n        const savedChallenges = JSON.parse(savedChallengesStr)\r\n\r\n        // archived challenges\r\n        const savedArchivedChallengesStr = windowGlobal ? windowGlobal.localStorage.getItem(\"archivedChallenges\") : \"{}\"\r\n        const savedArchivedChallenges = JSON.parse(savedArchivedChallengesStr)\r\n\r\n        characterData['character'] = savedCharacter;\r\n        characterData['traits'] = savedTraits;\r\n        characterData['activeTraits'] = savedActiveTraits;\r\n        characterData['challenges'] = savedChallenges;\r\n        characterData['archivedChallenges'] = savedArchivedChallenges;\r\n\r\n        var filename = savedCharacter['name'].replace(/[^a-z0-9]/gi, '_').toLowerCase();\r\n        download(JSON.stringify(characterData), filename, 'application/json');\r\n    }\r\n\r\n    function deleteAllData() {\r\n        if ( windowGlobal ) {\r\n            localStorage.clear();\r\n            window.location.href = '/';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Layout title=\"IMPORT/EXPORT\">\r\n            <Seo title=\"Import/Export\" />\r\n            <div class=\"import-export-container\">\r\n                <blockquote><p>This section allows you to import or export your character data for <i>safe backup</i>, or to \"move\" your game-state to another device (if, for example, you started playing in your smartphone and want to continue in your PC).<br/> You will need to copy the exported file to the new device and import it there manually.</p></blockquote>\r\n                <h2>EXPORT CHARACTER</h2>\r\n                <label for=\"export\">Save current Character and game-state to a local file:</label><br/>\r\n                <button id=\"export\" onClick={exportCharacter}>Save</button>\r\n                <blockquote><p>The data is saved locally as a JSON file into your default <i>Downloads</i> directory.</p></blockquote>\r\n                <br/>\r\n                <h2>IMPORT CHARACTER</h2>\r\n                <label for=\"import\">Load Character and game-state from a local file:</label><br/>\r\n                <input type=\"file\" id=\"import\" accept=\".json\" onChange={importCharacter}/>\r\n                <br/>\r\n                <br/>\r\n                <br/>\r\n                <hr/>\r\n                <br/>\r\n                <blockquote><p>Note that the <b>cy.br/dys.top.ia</b> web app already saves your character stats, traits and challenges using your browser's <i>localStorage</i>. Since this is similar to <i>web cookies</i>, it will get erased if you clear the cache, uninstall the app, etc. <br/>For that reason, it is recommended that you use this IMPORT/EXPORT functionality often to backup your progress safely.</p></blockquote>\r\n                <br/>\r\n                <h2>DELETE ALL DATA</h2>\r\n                <label for=\"delete-all\">Clear all data (<i>localStorage</i>) from this device:</label><br/>\r\n                <button id=\"delete-all\" onClick={deleteAllData}>DELETE</button>\r\n                <blockquote><p>Use this function to clear all data at once when you need to reset the state of the entire app, or if you've found a breaking bug or a malfunction caused by a desync after a breaking update.<br/><b>WARNING</b>: This action cannot be undone.</p></blockquote>\r\n                <hr/>\r\n                <br/>\r\n                <br/>\r\n                <br/>\r\n            </div>\r\n        </Layout>\r\n    );\r\n}"],"names":["importExport","characterData","windowGlobal","window","title","class","for","id","onClick","savedCharacterStr","localStorage","getItem","savedCharacter","JSON","parse","savedTraitsStr","savedTraits","savedActiveTraits","savedChallengesStr","savedChallenges","savedArchivedChallengesStr","savedArchivedChallenges","content","fileName","contentType","a","file","filename","replace","toLowerCase","stringify","document","createElement","Blob","type","href","URL","createObjectURL","download","click","accept","onChange","e","target","files","reader","FileReader","onload","characterDataStr","loadedCharacterData","alert","loadedCharacterStats","loadedCharacterTraits","loadedCharacterActiveTraits","loadedCharacterChallenges","loadedCharacterArchivedChallenges","setItem","saveCharacterData","result","readAsText","location","clear"],"sourceRoot":""}